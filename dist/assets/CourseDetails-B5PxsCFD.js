import{u as e,j as s}from"./query-vendor-BvbPYVyx.js";import{u as l,V as r}from"./index-BC2_Mo0X.js";import{k as a,a as o,i,S as n,L as t}from"./react-vendor-C-D2dKjf.js";import{p as d}from"./purify.es-BeE17Zin.js";import{a as c}from"./useSEO-Z7-ScIHx.js";import{S as u}from"./SEOHead-BSuS9-FO.js";import{C as m}from"./CourseCard-BDKDHvx_.js";import{S as x}from"./share-2-BbNO6oeH.js";import"./ui-vendor-vXVCgKiZ.js";import"./createLucideIcon-e56RYTOK.js";const b=()=>s.jsxs("div",{className:"px-4 sm:px-8 py-12 max-w-5xl mx-auto bg-white animate-pulse",children:[s.jsx("div",{className:"h-10 w-2/3 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-1/3 bg-gray-200 rounded mb-4"}),s.jsx("div",{className:"h-4 w-full bg-gray-200 rounded mb-2"}),s.jsx("div",{className:"h-4 w-4/5 bg-gray-200 rounded mb-6"}),s.jsx("div",{className:"mb-10",children:s.jsx("div",{className:"relative pb-[56.25%] h-0 overflow-hidden rounded-md bg-gray-200",children:s.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gray-300 rounded-2xl"})})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"h-6 w-1/4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-full bg-gray-200 rounded mb-1"}),s.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded mb-1"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"h-6 w-1/4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-2/3 bg-gray-200 rounded mb-1"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"h-6 w-1/4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded mb-1"})]}),s.jsxs("div",{className:"mb-8 border rounded-xl p-5 bg-gray-50",children:[s.jsx("div",{className:"h-6 w-1/4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-1/3 bg-gray-200 rounded mb-1"}),s.jsx("div",{className:"h-4 w-1/2 bg-gray-200 rounded mb-1"})]}),s.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border rounded-xl p-5",children:[s.jsxs("div",{children:[s.jsx("div",{className:"h-6 w-24 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-8 w-40 bg-gray-300 rounded"})]}),s.jsx("div",{className:"h-10 w-32 bg-blue-300 rounded"})]})]}),g=()=>{var m,g;const{courseSlug:h}=a(),p=l(),{data:j,isLoading:N}=e({queryKey:["courseDetails",h],queryFn:async()=>{var e;const s=await p.get(`/courses/details/${h}`);return null==(e=null==s?void 0:s.data)?void 0:e.data},enabled:!!h}),{seoData:f}=c("course-details"),y=o.useMemo(()=>{const e=(null==f?void 0:f.meta_title)||"Job Dockets Course",s=((null==j?void 0:j.sub_description)||(null==j?void 0:j.description)||"").replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim(),l=s?`${s.substring(0,152)}${s.length>152?"…":""}`:(null==f?void 0:f.meta_description)||"Discover free courses on Job Dockets.",r=(null==j?void 0:j.slug)||(null==j?void 0:j.id),a=r?`https://jobdockets.com/courses/${r}`:void 0;return{...f,meta_title:(null==j?void 0:j.title)?`${j.title} | Job Dockets`:e,meta_description:l,canonical_url:a??(null==f?void 0:f.canonical_url)}},[j,f]),w=Boolean(null==j?void 0:j.copoun),_=o.useMemo(()=>{const e=null==j?void 0:j.link_url;if(!e)return"#";if(!w)return e;if(e.includes("couponCode="))return e;const s=(null==j?void 0:j.copoun)||"KEEPLEARNINGOCTA",l=e.includes("?")?"&":"?";return`${e}${l}couponCode=${encodeURIComponent(s)}`},[null==j?void 0:j.link_url,null==j?void 0:j.copoun,w]);if(N)return s.jsx(b,{});if(!j)return s.jsx(i,{to:"/free-courses",replace:!0});return s.jsxs("div",{className:"px-4 sm:px-8 py-12 max-w-5xl mx-auto bg-white",children:[s.jsx(u,{seoData:y}),s.jsx(n,{}),s.jsxs("nav",{className:"text-sm text-gray-600 mb-3",children:[s.jsx(t,{to:"/",className:"hover:text-blue-600",children:"Home"}),s.jsx("span",{className:"mx-2",children:"›"}),s.jsx(t,{to:"/free-courses",className:"hover:text-blue-600",children:"Courses"}),(null==j?void 0:j.category_group)&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mx-2",children:"›"}),s.jsx(t,{to:`/courses/c/${j.category_group}`,className:"hover:text-blue-600",children:null==j?void 0:j.category_group_label})]}),s.jsx("span",{className:"mx-2",children:"›"}),s.jsx("span",{className:"text-gray-800",children:null==j?void 0:j.title})]}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:(null==f?void 0:f.h1_tags)||(null==j?void 0:j.title)}),s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:["Instructor: ",(null==j?void 0:j.instructor_name)||"N/A"," • Language: ",(null==j?void 0:j.language)||"N/A"]}),s.jsxs("button",{type:"button",onClick:async()=>{var e;const s="undefined"!=typeof window?window.location.href:"",l={title:(null==j?void 0:j.title)||"Job Dockets Course",text:(null==(e=null==j?void 0:j.sub_description)?void 0:e.replace(/<[^>]+>/g," ").slice(0,120))||"Check out this free course on Job Dockets.",url:s};if(navigator.share)try{await navigator.share(l)}catch(a){"AbortError"!==(null==a?void 0:a.name)&&r.error("Unable to open share dialog.")}else try{await navigator.clipboard.writeText(l.url),r.success("Course link copied to clipboard.")}catch{r.error("Unable to copy link. Please copy it manually.")}},className:"inline-flex items-center gap-1 rounded-full border border-blue-200 bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-700 hover:bg-blue-100 transition-colors self-start sm:self-auto","aria-label":"Share this course",children:[s.jsx(x,{className:"h-4 w-4"}),"Share"]})]}),s.jsxs("div",{className:"mb-6",children:[!!(null==(m=null==j?void 0:j.categories)?void 0:m.length)&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:j.categories.map(e=>{const l=e.slug||e.id;return s.jsx(t,{to:`/courses/c/${l}`,className:"inline-block px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200",children:e.name},e.id)})}),!!(null==(g=null==j?void 0:j.subcategories)?void 0:g.length)&&s.jsx("div",{className:"flex flex-wrap gap-2",children:j.subcategories.map(e=>{var l,r,a,o;const i=e.slug||e.id,n=(null==j?void 0:j.category_group)||(null==(r=null==(l=null==j?void 0:j.categories)?void 0:l[0])?void 0:r.slug)||(null==(o=null==(a=null==j?void 0:j.categories)?void 0:a[0])?void 0:o.id),d=n?`/courses/c/${n}/${i}`:"/free-courses";return s.jsx(t,{to:d,className:"inline-block px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full hover:bg-green-200",children:e.name},e.id)})})]}),s.jsx("div",{className:"text-base text-gray-700 leading-relaxed mb-6 prose max-w-none blog-content",dangerouslySetInnerHTML:{__html:d.sanitize((null==j?void 0:j.sub_description)||"")}}),s.jsx("div",{className:"mb-10",children:s.jsx("div",{className:"relative pb-[56.25%] h-0 overflow-hidden rounded-md",children:s.jsx("img",{src:null==j?void 0:j.image,alt:null==j?void 0:j.title,className:"absolute border rounded-2xl shadow-md top-0 left-0 w-full h-full object-cover"})})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Description"}),s.jsx("div",{className:"prose max-w-none blog-content",dangerouslySetInnerHTML:{__html:d.sanitize((null==j?void 0:j.description)||"")}})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Course Eligibility"}),s.jsx("div",{className:"prose max-w-none blog-content",dangerouslySetInnerHTML:{__html:d.sanitize((null==j?void 0:j.course_eligibility)||"")}})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Course Requirements"}),s.jsx("div",{className:"prose max-w-none blog-content",dangerouslySetInnerHTML:{__html:d.sanitize((null==j?void 0:j.requirements)||"",{ALLOWED_TAGS:["p","br","strong","em","u","ul","ol","li","h1","h2","h3","h4","h5","h6","div","span"],ALLOWED_ATTR:["class","style"]})}})]}),s.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border rounded-xl p-5",children:[s.jsx("div",{children:s.jsx("p",{className:"text-3xl text-blue-700 font-bold",children:"Price: Free"})}),s.jsx(t,{to:_,target:"_blank",rel:"noreferrer",children:s.jsx("button",{className:(w?"bg-emerald-500 hover:bg-emerald-600":"bg-blue-500 hover:bg-blue-600")+" text-white px-6 py-2 rounded-md transition cursor-pointer",children:w?"Learn for Free":"Enroll Now"})})]}),s.jsx(v,{currentId:null==j?void 0:j.id,currentCategories:null==j?void 0:j.categories})]})},v=({currentId:r,currentCategories:a})=>{const o=l(),{data:i,isLoading:n}=e({queryKey:["allCoursesForRelated"],queryFn:async()=>{var e,s;const l=await o.get("/courses",{params:{per_page:60,sort_by:"created_at",sort_direction:"desc"}});return(null==(s=null==(e=null==l?void 0:l.data)?void 0:e.data)?void 0:s.courses)||[]}});if(n)return null;const t=new Set((a||[]).map(e=>String(e.id))),d=(i||[]).filter(e=>String(e.id)!==String(r)).filter(e=>(e.categories||[]).some(e=>t.has(String(e.id)))).slice(0,8);return d.length?s.jsxs("div",{className:"mt-12",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Related Courses"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:d.map(e=>s.jsx(m,{course:e},e.id))})]}):null};export{g as default};
