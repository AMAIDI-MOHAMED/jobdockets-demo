import{u as e,b as t,j as o}from"./query-vendor-BvbPYVyx.js";import{g as a,a as s,s as l,J as n}from"./JobCard-BWnpfdKV.js";import{J as r}from"./JobSkaleton-D1IZ2Re4.js";import{S as i}from"./SEOHead-BSuS9-FO.js";import{u as c}from"./useSEO-Z7-ScIHx.js";import{u as d}from"./index-BC2_Mo0X.js";import{k as u,a as m,l as b,S as g}from"./react-vendor-C-D2dKjf.js";import{S as p}from"./search-DF611J_g.js";import"./ui-vendor-vXVCgKiZ.js";import"./createLucideIcon-e56RYTOK.js";const x=(e="")=>e.split("-").filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),j=()=>{var j,h,v;const{categorySlug:f,locationSlug:y}=u(),[N,$]=m.useState(f||""),[_,w]=m.useState(""),[J,k]=m.useState(""),[S,C]=m.useState(""),{seoData:D}=c("jobs"),F=d(),M=b(),O=m.useMemo(()=>f&&y?"category-location":f?"category":y?"location":null,[f,y]);m.useEffect(()=>{const e=setTimeout(()=>{C(J.trim())},400);return()=>clearTimeout(e)},[J]);const P=m.useMemo(()=>y?a(y):null,[y]);m.useEffect(()=>{f?$(f):"category"!==O&&"category-location"!==O||$("")},[f,O]),m.useEffect(()=>{(null==P?void 0:P.label)?w(P.label):y||w("")},[y,null==P?void 0:P.label]);const{data:q=[]}=e({queryKey:["job-post-categories"],queryFn:async()=>{var e;const t=await F.get("/job-post-categories");return(null==(e=null==t?void 0:t.data)?void 0:e.data)||[]}}),E=m.useMemo(()=>f&&q.find(e=>e.value===f)||null,[f,q]),L=m.useMemo(()=>[{value:"",label:"All Jobs"},...q.map(e=>({value:e.value,label:e.label}))],[q]),R=m.useMemo(()=>s.map(e=>e.label),[]),A=m.useCallback(async({pageParam:e=1})=>{var t;const o={page:e,per_page:12,sort_by:"created_at",sort_direction:"desc"};N&&(o.category=N);const a=_?l(_):y||"";a&&(o.location=a),S&&(o.search=S);const s=await F.get("/job-posts",{params:o}),n=(null==(t=null==s?void 0:s.data)?void 0:t.data)||{};return{jobs:n.jobs||[],pagination:n.pagination||{}}},[F,N,_,y,S]),{data:B,isLoading:H,fetchNextPage:K,hasNextPage:T,isFetchingNextPage:G}=t({queryKey:["all-jobs",N,_,y,S],queryFn:({pageParam:e=1})=>A({pageParam:e}),getNextPageParam:e=>{const t=null==e?void 0:e.pagination;if(null==t?void 0:t.has_more){const e=((null==t?void 0:t.current_page)||1)+1;if(e<=((null==t?void 0:t.last_page)||1))return e}}}),I=m.useMemo(()=>{var e;return(null==(e=null==B?void 0:B.pages)?void 0:e.length)?B.pages.flatMap(e=>(null==e?void 0:e.jobs)||[]):[]},[B]),U=null==(h=null==(j=null==B?void 0:B.pages)?void 0:j[0])?void 0:h.pagination,z=(null==U?void 0:U.total)||0,Q=H&&!(null==(v=null==B?void 0:B.pages)?void 0:v.length),V=m.useCallback((e,t)=>{M(e&&t?`/jobs/c/${e}/l/${t}`:e?`/jobs/c/${e}`:t?`/jobs/l/${t}`:"/jobs")},[M]),W=e=>{(e=>{$(e);const t=y||(_?l(_):"");V(e||null,t||null)})(e)},X=e=>{w(e),(e=>{const t=e?l(e):"";V(f||N||null,t||null)})(e)},Y=m.useMemo(()=>{if(!P)return null;const e=P.label,t=`https://jobdockets.com/jobs/l/${P.slug}`,o=`Browse curated ${e} job vacancies and apply directly to hiring managers through Job Dockets.`;return{...D,meta_title:`Jobs in ${e} | Job Dockets`,meta_description:o,og_title:`Jobs in ${e} | Job Dockets`,og_description:o,og_url:t,canonical_url:t,twitter_title:`Jobs in ${e} | Job Dockets`,twitter_description:o}},[P,D]),Z=m.useMemo(()=>{if(!f)return null;const e=(null==E?void 0:E.label)||x(f);if(!e)return null;const t=`https://jobdockets.com/jobs/c/${f}`,o=`Explore curated ${e} job vacancies across Nigeria on Job Dockets.`;return{...D,meta_title:`${e} Jobs in Nigeria | Job Dockets`,meta_description:o,og_title:`${e} Jobs in Nigeria | Job Dockets`,og_description:o,og_url:t,canonical_url:t,twitter_title:`${e} Jobs in Nigeria | Job Dockets`,twitter_description:o}},[f,E,D]),ee=m.useMemo(()=>{if(!f||!P)return null;const e=(null==E?void 0:E.label)||x(f);if(!e)return null;const t=P.label,o=`https://jobdockets.com/jobs/c/${f}/l/${P.slug}`,a=`Find ${e} opportunities in ${t} and connect directly with decision-makers via Job Dockets.`;return{...D,meta_title:`${e} Jobs in ${t} | Job Dockets`,meta_description:a,og_title:`${e} Jobs in ${t} | Job Dockets`,og_description:a,og_url:o,canonical_url:o,twitter_title:`${e} Jobs in ${t} | Job Dockets`,twitter_description:a}},[f,E,P,D])||Y||Z||D;let te=(null==D?void 0:D.h1_tags)||"Find Job vacancies in Nigeria – Remote, Online & On-Site",oe="Connect directly with HR and employers for the latest job vacancies and career opportunities in Nigeria. Skip job boards. Get direct access.";if(f&&P){const e=(null==E?void 0:E.label)||x(f);te=`Find ${e} jobs in ${P.label} – Remote, Online & On-Site`,oe=`Connect directly with ${P.label} recruiters hiring for ${e} roles.`}else if(f){const e=(null==E?void 0:E.label)||x(f);te=`Find ${e} job vacancies – Remote, Online & On-Site`,oe=`Connect directly with hiring teams for the best ${e} opportunities in Nigeria.`}else P&&(te=`Find ${P.label} job vacancies – Remote, Online & On-Site`,oe=`Connect directly with ${P.label} recruiters and employers for the latest openings.`);return o.jsxs("div",{className:"px-4 sm:px-8 py-12 bg-white",children:[o.jsx(i,{seoData:ee}),o.jsx(g,{}),o.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:te}),o.jsx("h2",{className:"text-lg text-gray-600 mb-6 text-center max-w-4xl mx-auto",children:oe}),o.jsxs("div",{className:"max-w-5xl mx-auto mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",value:J,onChange:e=>k(e.target.value),placeholder:"Search by job title, company, or keywords",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),S&&o.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center sm:text-left",children:["Found ",z," job",1===z?"":"s",' for "',S,'"']})]}),o.jsxs("div",{className:"max-w-5xl mx-auto mb-8 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsx("select",{value:N,onChange:e=>W(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:L.map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))}),o.jsxs("select",{value:_,onChange:e=>X(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"All Locations"}),R.map(e=>o.jsx("option",{value:e,children:e},e))]})]}),Q?o.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>o.jsx(r,{},t))}):o.jsx(o.Fragment,{children:0===I.length?o.jsx("div",{className:"text-center text-gray-600",children:"No jobs found."}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:I.map(e=>o.jsx(n,{job:e},e.id))}),T&&o.jsx("div",{className:"text-center mt-10",children:o.jsx("button",{onClick:()=>K(),disabled:G,className:"px-6 py-3 bg-[#03a9f4] text-white font-semibold rounded-lg hover:bg-[#0288d1] disabled:opacity-60",children:G?"Loading...":"Load More"})})]})}),!Q&&S&&0===z&&o.jsx("div",{className:"text-center py-12",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:o.jsx(p,{className:"w-12 h-12 text-gray-400"})}),o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No jobs found"}),o.jsxs("p",{className:"text-gray-600 mb-4",children:['No jobs match your search for "',S,'"']}),o.jsx("button",{onClick:()=>k(""),className:"text-[#03a9f4] hover:text-[#0288d1] font-medium",children:"Clear search"})]})})]})};export{j as default};
