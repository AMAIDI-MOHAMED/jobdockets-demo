import{u as e,j as s}from"./query-vendor-BvbPYVyx.js";import{u as a}from"./index-BC2_Mo0X.js";import{k as l,a as t,i as o,S as n,L as i}from"./react-vendor-C-D2dKjf.js";import{p as d}from"./purify.es-BeE17Zin.js";import{a as r}from"./useSEO-Z7-ScIHx.js";import{S as c}from"./SEOHead-BSuS9-FO.js";import{s as m,J as u}from"./JobCard-BWnpfdKV.js";import"./ui-vendor-vXVCgKiZ.js";const x=()=>s.jsxs("div",{className:"px-4 sm:px-8 py-12 max-w-4xl mx-auto bg-white animate-pulse ",children:[s.jsx("div",{className:"h-10 w-2/3 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-1/3 bg-gray-200 rounded mb-4"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"h-6 w-1/4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-full bg-gray-200 rounded mb-1"}),s.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded mb-1"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"h-6 w-1/4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-full bg-gray-200 rounded mb-1"}),s.jsx("div",{className:"h-4 w-4/5 bg-gray-200 rounded mb-1"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"h-6 w-1/4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded mb-1"}),s.jsx("div",{className:"h-4 w-2/3 bg-gray-200 rounded mb-1"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"h-6 w-1/4 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-4/5 bg-gray-200 rounded mb-1"}),s.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded mb-1"})]}),s.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border rounded-xl p-5",children:[s.jsxs("div",{children:[s.jsx("div",{className:"h-6 w-24 bg-gray-300 rounded mb-2"}),s.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded"})]}),s.jsx("div",{className:"h-10 w-32 bg-blue-300 rounded"})]})]}),b=()=>{const{jobSlug:u,id:b}=l(),j=u||b,v=a(),{data:h,isLoading:p}=e({queryKey:["jobDetails",j],queryFn:async()=>{var e;const s=await v.get(`/job-posts/details/${j}`);return null==(e=null==s?void 0:s.data)?void 0:e.data},enabled:!!j}),{seoData:y}=r("job-details"),N=t.useMemo(()=>h?{"@context":"https://schema.org","@type":"JobPosting",title:h.title,description:d.sanitize(h.description||"",{ALLOWED_TAGS:[]}),datePosted:h.created_at,employmentType:h.type||"CONTRACTOR",industry:h.category_label||"General",hiringOrganization:{"@type":"Organization",name:h.company||"Hiring Organization",sameAs:"https://jobdockets.com/"},jobLocation:{"@type":"Place",address:{"@type":"PostalAddress",addressLocality:h.location||"Nigeria",addressCountry:"NG"}},applicantLocationRequirements:{"@type":"Country",name:"Nigeria"},baseSalary:{"@type":"MonetaryAmount",currency:"NGN",value:{"@type":"QuantitativeValue",value:h.salary||0,unitText:"MONTH"}},validThrough:h.valid_through||h.created_at,employmentUnit:h.type||void 0}:null,[h]),_=t.useMemo(()=>h?{...y,meta_title:h.title?`${h.title} | Job Dockets`:null==y?void 0:y.meta_title,meta_description:h.description?d.sanitize(h.description,{ALLOWED_TAGS:[]}).slice(0,155):null==y?void 0:y.meta_description,canonical_url:`https://jobdockets.com/jobs/${h.slug||h.id}`,structured_data:N||(null==y?void 0:y.structured_data)}:y,[h,y,N]);return p?s.jsx(x,{}):h?s.jsxs("div",{className:"px-4 sm:px-8 py-12 max-w-4xl mx-auto bg-white",children:[s.jsx(c,{seoData:_}),s.jsx(n,{}),s.jsxs("nav",{className:"text-sm text-gray-600 mb-4",children:[s.jsx(i,{to:"/",className:"hover:text-blue-600",children:"Home"}),s.jsx("span",{className:"mx-2",children:"›"}),s.jsx(i,{to:"/jobs",className:"hover:text-blue-600",children:"Jobs"}),h.category&&h.category_label&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mx-2",children:"›"}),s.jsx(i,{to:`/jobs/c/${h.category}`,className:"hover:text-blue-600",children:h.category_label})]}),h.location&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"mx-2",children:"›"}),(()=>{const e=m(h.location);return e?s.jsx(i,{to:`/jobs/l/${e}`,className:"hover:text-blue-600",children:h.location}):s.jsx("span",{className:"text-gray-800",children:h.location})})()]}),s.jsx("span",{className:"mx-2",children:"›"}),s.jsx("span",{className:"text-gray-800",children:h.title})]}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:(null==y?void 0:y.h1_tags)||(null==h?void 0:h.title)}),s.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:[(null==h?void 0:h.company)||"Company"," • ",(null==h?void 0:h.location)||"Location"," • ",(null==h?void 0:h.type)||"Job Type"," • ",(null==h?void 0:h.salary)||"Compensation"]}),s.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[(null==h?void 0:h.category)&&(null==h?void 0:h.category_label)&&s.jsx(i,{to:`/jobs/c/${h.category}`,className:"inline-block px-3 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200 transition-colors",children:h.category_label}),((null==h?void 0:h.job_location)||(null==h?void 0:h.location))&&(()=>{const e=m((null==h?void 0:h.job_location)||(null==h?void 0:h.location));return e?s.jsx(i,{to:`/jobs/l/${e}`,className:"inline-block px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full hover:bg-green-200 transition-colors",children:(null==h?void 0:h.job_location)||(null==h?void 0:h.location)}):s.jsx("span",{className:"inline-block px-3 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:(null==h?void 0:h.job_location)||(null==h?void 0:h.location)})})()]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"About the Company"}),s.jsx("div",{className:"text-gray-700 leading-relaxed prose max-w-none blog-content",dangerouslySetInnerHTML:{__html:d.sanitize((null==h?void 0:h.about_company)||"")}})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Job Description"}),s.jsx("div",{className:"text-gray-700 leading-relaxed prose max-w-none blog-content",dangerouslySetInnerHTML:{__html:d.sanitize((null==h?void 0:h.description)||"")}})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Key Responsibilities"}),s.jsx("div",{className:"text-gray-700 leading-relaxed prose max-w-none blog-content",dangerouslySetInnerHTML:{__html:d.sanitize((null==h?void 0:h.responsibilities)||"")}})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Required Skills"}),s.jsx("div",{className:"text-gray-700 leading-relaxed prose max-w-none blog-content",dangerouslySetInnerHTML:{__html:d.sanitize((null==h?void 0:h.requirements)||"")}})]}),s.jsx(g,{currentId:null==h?void 0:h.id})]}):s.jsx(o,{to:"/jobs",replace:!0})},g=({currentId:l})=>{const t=a(),{data:o,isLoading:n}=e({queryKey:["allJobsForRelated"],queryFn:async()=>{var e,s;const a=await t.get("/job-posts",{params:{per_page:60,sort_by:"created_at",sort_direction:"desc"}});return(null==(s=null==(e=null==a?void 0:a.data)?void 0:e.data)?void 0:s.jobs)||[]}});if(n)return null;const i=e=>{if(!e)return 0;const s=new Date(e);return Number.isNaN(s.getTime())?0:s.getTime()},d=(o||[]).filter(e=>String(e.id)!==String(l)).sort((e,s)=>i((null==s?void 0:s.created_at)||(null==s?void 0:s.created_at_date)||(null==s?void 0:s.updated_at))-i((null==e?void 0:e.created_at)||(null==e?void 0:e.created_at_date)||(null==e?void 0:e.updated_at))).slice(0,6);return d.length?s.jsxs("div",{className:"mt-12",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Related Jobs"}),s.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:d.map(e=>s.jsx(u,{job:e},e.id))})]}):null};export{b as default};
