import{u as e,b as s,j as t}from"./query-vendor-BvbPYVyx.js";import{C as a}from"./CourseCard-BDKDHvx_.js";import{C as l}from"./CourseCardSkaleton-CMgUAkyx.js";import{u as r}from"./index-BC2_Mo0X.js";import{k as o,l as i,a as c,S as u}from"./react-vendor-C-D2dKjf.js";import{u as n}from"./useSEO-Z7-ScIHx.js";import{S as d}from"./SEOHead-BSuS9-FO.js";import{S as m}from"./search-DF611J_g.js";import"./purify.es-BeE17Zin.js";import"./ui-vendor-vXVCgKiZ.js";import"./createLucideIcon-e56RYTOK.js";const g="/free-courses",x=()=>{var x,p,b;const{categorySlug:v,subcategorySlug:h}=o(),f=i(),[j,y]=c.useState(""),[w,N]=c.useState(""),[C,_]=c.useState(""),[k,$]=c.useState(""),{seoData:S}=n("courses"),D=r(),M=c.useMemo(()=>v&&h?"category-subcategory":v?"category":h?"subcategory":null,[v,h]);c.useEffect(()=>{const e=setTimeout(()=>{N(j.trim())},400);return()=>clearTimeout(e)},[j]);const{data:A=[]}=e({queryKey:["course-categories"],queryFn:async()=>{var e;const s=await D.get("/course-categories");return(null==(e=null==s?void 0:s.data)?void 0:e.data)||[]}}),E=c.useCallback(e=>{var s;if(!e)return null;for(const t of A)if(null==(s=null==t?void 0:t.subcategories)?void 0:s.some(s=>s.value===e))return t;return null},[A]);c.useEffect(()=>{if(v)_(v);else{if(h){const e=E(h);if(e)return void _(e.value)}M||_("")}},[v,h,M,E]),c.useEffect(()=>{h?$(h):M&&"category"!==M||$("")},[h,M]);const F=c.useMemo(()=>[{value:"",label:"All Courses"},...A.map(e=>({value:e.value,label:e.label}))],[A]),P=c.useMemo(()=>{if(!C)return[{value:"",label:"All Subcategories"}];const e=A.find(e=>e.value===C);return e?[{value:"",label:"All Subcategories"},...(e.subcategories||[]).map(e=>({value:e.value,label:e.label}))]:[{value:"",label:"All Subcategories"}]},[A,C]),J=c.useCallback(async({pageParam:e=1})=>{var s;const t={page:e,per_page:12,sort_by:"created_at",sort_direction:"desc"};w&&(t.search=w),C&&(t.category=C),k&&(t.subcategory=k);const a=await D.get("/courses",{params:t}),l=(null==(s=null==a?void 0:a.data)?void 0:s.data)||{};return{courses:l.courses||[],pagination:l.pagination||{}}},[D,w,C,k]),{data:q,isLoading:L,fetchNextPage:U,hasNextPage:B,isFetchingNextPage:K}=s({queryKey:["all-courses",C,k,w],queryFn:({pageParam:e=1})=>J({pageParam:e}),getNextPageParam:e=>{const s=null==e?void 0:e.pagination;if(null==s?void 0:s.has_more){const e=((null==s?void 0:s.current_page)||1)+1;if(e<=((null==s?void 0:s.last_page)||1))return e}}}),O=c.useMemo(()=>{var e;return(null==(e=null==q?void 0:q.pages)?void 0:e.length)?q.pages.flatMap(e=>(null==e?void 0:e.courses)||[]):[]},[q]),T=null==(p=null==(x=null==q?void 0:q.pages)?void 0:x[0])?void 0:p.pagination,H=(null==T?void 0:T.total)||0,I=L&&!(null==(b=null==q?void 0:q.pages)?void 0:b.length),Y=c.useMemo(()=>v&&A.length?A.find(e=>e.value===v)||null:h?E(h):null,[v,A,h,E]),z=c.useMemo(()=>{var e;if(h&&A.length){const s=E(h);return(null==(e=null==s?void 0:s.subcategories)?void 0:e.find(e=>e.value===h))||null}return null},[h,A,E]);let G=(null==S?void 0:S.h1_tags)||"Explore All Courses",Q="Your ultimate hub for free Udemy courses. Learn high-value skills with 100% off coupon codes.";Y&&z?(G=`Free ${z.label} Courses`,Q=`Unlock 100% off coupons for ${z.label} inside ${Y.label}.`):Y&&(G=`Free ${Y.label} Courses`,Q=`Explore curated ${Y.label} Udemy coupons.`);const R=c.useMemo(()=>{if(Y&&z){const e=`https://jobdockets.com/courses/c/${Y.value}/${z.value}`,s=`Access handpicked ${z.label} courses (${Y.label}) with 100% free Udemy coupons.`;return{...S,meta_title:`${z.label} Courses | Job Dockets`,meta_description:s,og_title:`${z.label} Courses | Job Dockets`,og_description:s,og_url:e,canonical_url:e,twitter_title:`${z.label} Courses | Job Dockets`,twitter_description:s}}if(Y){const e=`https://jobdockets.com/courses/c/${Y.value}`,s=`Browse curated ${Y.label} courses with verified Udemy coupons from Job Dockets.`;return{...S,meta_title:`${Y.label} Courses | Job Dockets`,meta_description:s,og_title:`${Y.label} Courses | Job Dockets`,og_description:s,og_url:e,canonical_url:e,twitter_title:`${Y.label} Courses | Job Dockets`,twitter_description:s}}return S},[S,Y,z]);return t.jsxs("div",{className:"min-h-screen bg-gradient-to-t from-[#09B1FE] to-[#433DCA]",children:[t.jsx(d,{seoData:R}),t.jsx(u,{}),t.jsx("section",{className:"bg-transparent py-5 px-4 sm:px-8 text-center",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6",children:G}),t.jsx("h2",{className:"text-lg sm:text-xl text-white/90 mb-2 max-w-3xl mx-auto",children:Q})]})}),t.jsxs("div",{className:"px-4 sm:px-8 py-3",children:[t.jsxs("div",{className:"max-w-5xl mx-auto mb-8",children:[t.jsxs("div",{className:"relative",children:[t.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"",value:j,onChange:e=>y(e.target.value),className:"placeholder:text-white text-white w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),w&&t.jsxs("p",{className:"text-sm text-gray-200 mt-2 text-center",children:["Found ",H," course",1===H?"":"s",' for "',w,'"']})]}),t.jsxs("div",{className:"max-w-5xl mx-auto mb-8 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsx("select",{value:C,onChange:e=>{return s=e.target.value,_(s),$(""),void f(s?`/courses/c/${s}`:g);var s},className:"w-full px-4 py-3 border border-white/40 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent",children:F.map(e=>t.jsx("option",{value:e.value,className:"text-black",children:e.label},e.value))}),t.jsx("select",{value:k,onChange:e=>(e=>{var s;if($(e),!e)return void f(C?`/courses/c/${C}`:g);const t=C||(null==(s=E(e))?void 0:s.value);t?(C||_(t),f(`/courses/c/${t}/${e}`)):f(g)})(e.target.value),className:"w-full px-4 py-3 border border-white/40 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent disabled:opacity-60",disabled:""===C||P.length<=1,children:P.map(e=>t.jsx("option",{value:e.value,className:"text-black",children:e.label},e.value))})]}),I?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 gap-8 max-w-7xl mx-auto",children:Array.from({length:10}).map((e,s)=>t.jsx(l,{},s))}):t.jsx("div",{className:"max-w-7xl mx-auto",children:0===O.length?t.jsx("div",{className:"text-white/90 text-center py-8",children:"No courses found."}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-4 gap-6",children:O.map(e=>t.jsx(a,{course:e},e.id))}),B&&t.jsx("div",{className:"text-center mt-10",children:t.jsx("button",{onClick:()=>U(),disabled:K,className:"px-6 py-3 bg-white/90 text-blue-600 font-semibold rounded-lg hover:bg-white disabled:opacity-60",children:K?"Loading...":"Load More"})})]})}),!I&&w&&0===H&&t.jsx("div",{className:"text-center py-12",children:t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center",children:t.jsx(m,{className:"w-12 h-12 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No courses found"}),t.jsxs("p",{className:"text-gray-600 mb-4",children:['No courses match your search for "',j,'"']}),t.jsx("button",{onClick:()=>y(""),className:"text-blue-500 hover:text-blue-600 font-medium",children:"Clear search"})]})})]})]})};export{x as default};
